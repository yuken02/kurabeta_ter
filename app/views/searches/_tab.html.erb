<div class="tab_box my-2">
  <div class="btn_area">
    <% @tab.each_with_index do |tab, i| %>
      <p class="tab_btn <% if i == 0 %>active<% end %>"><%= tab.name%></p>
    <% end %>
  </div>

  <%= form_with url: "/search",method: :get do |f| %>
    <div class="panel_area mb-2">
      <% @tab.each_with_index do |tab, i| %>
        <div class="tab_panel <% if i == 0 %>active<% end %>">
          <% @word.each do |word| %>
            <% if word.tab_id == tab.id %>
                <div>
                  <%= f.check_box :word, {multiple: true}, word.word, class: "select" %>
                  <%= f.label :word, word.word %>
                </div>
            <% end %>
          <% end %>
        </div>
      <% end %>
    </div>
    <div class="actions mb-4 d-flex justify-content-center">
      <%= f.submit "比べる", class: "btn btn-sm btn-info px-md-5" %>
    </div>
  <% end %>
</div>

<% if @tab_count < 3 %>
  <div class="col-12">
    <%= form_with model: @tab_new, local: true, class: 'row' do |f| %>
      <div class="form-group">
        <%= f.text_field :name, placeholder: '新しいタブ', class: 'mr-2' %>
      </div>
      <div class="form-group">
        <%= f.submit '作成', class: 'btn btn-sm btn-info' %>
      </div>
    <% end %>
  </div>
<% end %>

<div class="col-12">
  <%= form_with model: @word_new, class: 'row' do |f| %>
    <!-- ここにtab_idを指定するコード -->
    <div class="form-group">
      <%= f.text_field :word, placeholder: 'キーワード', class: 'mr-2' %>
    </div>
    <div class="form-group">
      <%= f.submit '登録', class: 'btn btn-sm btn-info' %>
    </div>
  <% end %>
</div>


<!-- 確認用メモ -->
<p>↓↓メモ</p>
<div class="tab_container">
  <p>タブ名</p>
  <% if @tab %>
    <% @tab.each do |tab| %>
      <div>
        <%= tab.name %>
        「id: <%= tab.id %>」
      </div>
    <% end %>
  <% end %>
</div>
<div class="word_container">
  <%= render 'word' %>
</div>


<!----- jQuery ----->
<script>
  $('.tab_box .tab_btn').click(function() {
  	var index = $('.tab_box .tab_btn').index(this);
  	$('.tab_box .tab_btn, .tab_box .tab_panel').removeClass('active');
  	$(this).addClass('active');
  	$('.tab_box .tab_panel').eq(index).addClass('active');
  	$("input[name='word[]']").prop('checked', false);  //タブクリックでチェック解除
  });
</script>